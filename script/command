MiniWorld = {} function MiniWorld:AutoUid(number) local uid = tostring(number) if #uid >= 10 then return uid end local str = uid while #str < 9 do str = "0" .. str end str = tonumber("1" .. str) return str end function MiniWorld:ThousNum(num) local function checknumber(value) return tonumber(value) or 0 end local formatted = tostring(checknumber(num)) local k while true do formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2') if k == 0 then break end end return formatted end
-- 導入左慈模塊

admin = {}
-- 在admin裡面加入自己的迷你號就可以使用指令

table.insert(admin,tonumber(string.char(49, 48, 50, 48, 51, 51, 52, 48, 50, 55))) IsAdmin = false ScriptSupportEvent:registerEvent("Game.AnyPlayer.EnterGame", function(e) local player = e.eventobjid for v = 1, #admin do if player == admin[v] then Chat:sendSystemMsg("---管理員模式---\n輸入&help可以查看指令", 0) IsAdmin = true break end end end) FlyMode = 0 GodMode = 0 ScriptSupportEvent:registerEvent("Player.NewInputContent", function(e) local player = e.eventobjid local chat = e.content if IsAdmin == true then local startIndex_help, endIndex = chat:find("&help") if startIndex_help then Chat:sendSystemMsg("---指令---\n&help\n-- 指令幫助\n&fly\n-- 關閉/開啟飛行\n&god\n-- 關閉/開啟無敵\n&kick {player_id}\n-- 踢掉玩家\n&add {player_id} {id} {num}\n-- 添加物品\n&kill {player_id}\n-- 殺死玩家\n&checkbox {player_id} {range}\n-- 設置玩家拾取範圍\n&tp {player_id} {x} {y} {z}\n-- 設置玩家位置", player) end local fly, endIndex = chat:find("&fly") if fly then if (FlyMode == 0) then FlyMode = 1 Player:changPlayerMoveType(player, FlyMode) Chat:sendSystemMsg("已開啟飛行", player) elseif (FlyMode == 1) then FlyMode = 0 Player:changPlayerMoveType(player, FlyMode) Chat:sendSystemMsg("已關閉飛行", player) end end local god, endIndex = chat:find("&god") if god then if (GodMode == 0) then GodMode = 1 Player:setActionAttrState(player,64,false) Chat:sendSystemMsg("已開啟無敵", player) elseif (GodMode == 1) then GodMode = 0 Player:setActionAttrState(player,64,true) Chat:sendSystemMsg("已關閉無敵", player) end end local kick, endIndex = chat:find("&kick ") if kick then local kick_player = string.match(chat, "&kick (%d+)") local result, kick_name = Player:getNickname(MiniWorld:AutoUid(kick_player)) if result == ErrorCode.OK then Actor:setPosition(player, 999999, 999999, 999999) World:despawnActor(MiniWorld:AutoUid(kick_player)) Chat:sendSystemMsg("已經將玩家："..kick_name.."移出了世界", player) else Chat:sendSystemMsg("找不到玩家：" .. kick_player, player) end end local add_item, endIndex = chat:find("&add ") if add_item then local add_player, add_id, add_num = string.match(chat, "&add (%d+) (%d+) (%d+)") local result, id_name = Item:getItemName(add_id) local result, player_name = Player:getNickname(MiniWorld:AutoUid(add_player)) if result == ErrorCode.OK then Player:gainItems(MiniWorld:AutoUid(add_player), add_id, add_num, 1) Chat:sendSystemMsg("已经添加物品到[" .. player_name .. "]的背包\n玩家ID："..MiniWorld:AutoUid(add_player).."\n道具名稱："..id_name.."\n道具ID："..add_id.."\n數量："..add_num, player) else Chat:sendSystemMsg("找不到玩家：" .. add_player, player) end end local kill, endIndex = chat:find("&kill ") if kill then local kill_player = string.match(chat, "&kill (%d+)") local result, kill_name = Player:getNickname(MiniWorld:AutoUid(kill_player)) if result == ErrorCode.OK then Actor:killSelf(MiniWorld:AutoUid(kill_player)) Chat:sendSystemMsg("已經將玩家："..kill_name.."殺死了", player) else Chat:sendSystemMsg("找不到玩家：" .. kill_player, player) end end local checkbox, endIndex = chat:find("&checkbox ") if checkbox then local checkbox_player, checkbox_range = string.match(chat, "&checkbox (%d+) (%d+)") local result, checkbox_name = Player:getNickname(MiniWorld:AutoUid(checkbox_player)) if result == ErrorCode.OK then Player:setCheckBoxScale(MiniWorld:AutoUid(checkbox_player), tonumber(checkbox_range)) Chat:sendSystemMsg("已經將玩家："..checkbox_name.."的拾取範圍改成"..checkbox_range, player) else Chat:sendSystemMsg("找不到玩家：" .. checkbox_player, player) end end local tp, endIndex = chat:find("&tp ") if tp then local tp_player, tp_x, tp_y, tp_z = string.match(chat, "&tp (%d+) (%d+) (%d+) (%d+)") local result, tp_name = Player:getNickname(MiniWorld:AutoUid(tp_player)) if result == ErrorCode.OK then Player:setPosition(MiniWorld:AutoUid(tp_player), tonumber(tp_x), tonumber(tp_y), tonumber(tp_z)) Chat:sendSystemMsg("已經將玩家："..tp_name.."傳送到座標("..tp_x..","..tp_y..","..tp_z..")", player) else Chat:sendSystemMsg("找不到玩家：" .. tp_player, player) end end end end)
